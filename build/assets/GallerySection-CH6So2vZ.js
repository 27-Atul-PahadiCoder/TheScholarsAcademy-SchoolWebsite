import{c as p,r as h,j as t}from"./index-vIF-A6XC.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],f=p("refresh-ccw",x),g="http://localhost:4000/api",b="scholar-admin-token",y=()=>sessionStorage.getItem(b);async function w(e){return(e.headers.get("content-type")??"").includes("application/json")?e.json():{raw:await e.text()}}async function m(e,s={}){const{auth:a,headers:n,body:o,...l}=s,i=new Headers(n);if(!(o instanceof FormData)&&!i.has("Content-Type")&&i.set("Content-Type","application/json"),a){const u=y();if(!u)throw new Error("Admin authentication required");i.set("Authorization",`Bearer ${u}`)}const r=await fetch(`${g}${e}`,{...l,body:o,headers:i}),c=await w(r);if(!r.ok){const u=c?.error??r.statusText;throw new Error(u||"Request failed")}return c?.data!==void 0?c.data:c}function j(e){return e.startsWith("http")?e:`${g.replace(/\/?api$/,"")}${e}`}const v={listPublic(e){return m(`/galleries/${e}`)},listAdmin(e){return m(`/galleries/${e}/admin`,{auth:!0})},upload(e,s,a){const n=new FormData;return n.append("file",s),a&&n.append("caption",a),m(`/galleries/${e}/photos`,{method:"POST",body:n,auth:!0})},update(e,s,a){return m(`/galleries/${e}/photos/${s}`,{method:"PATCH",body:JSON.stringify(a),auth:!0})},remove(e,s){return m(`/galleries/${e}/photos/${s}`,{method:"DELETE",auth:!0})}};function N(e){const[s,a]=h.useState([]),[n,o]=h.useState(!0),[l,i]=h.useState(null),d=h.useCallback(async()=>{if(e){o(!0);try{const r=await v.listPublic(e);a(r),i(null)}catch(r){const c=r instanceof Error?r.message:"Failed to load gallery";i(c)}finally{o(!1)}}},[e]);return h.useEffect(()=>{d()},[d]),{items:s,loading:n,error:l,refresh:d}}const $={grid:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",masonry:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 [&>figure:nth-child(odd)]:row-span-2"},k={grid:"h-64",masonry:"h-64 lg:h-auto lg:min-h-[18rem]"};function E(e,s="grid"){const a=j(e.mediaUrl);return t.jsxs("figure",{className:"relative group rounded-3xl overflow-hidden shadow-lg shadow-slate-900/10 border border-white/40 bg-white/10 backdrop-blur",children:[t.jsx("img",{src:a,alt:e.caption??"Gallery highlight",className:`w-full object-cover transition duration-500 group-hover:scale-105 ${k[s]}`,loading:"lazy"}),t.jsx("figcaption",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent p-4 text-white text-sm",children:e.caption??"Untitled highlight"})]},e.id)}function T({slug:e,title:s="Photo Highlights",description:a,layout:n="grid"}){const{items:o,loading:l,refresh:i}=N(e);return!e||!(o.length>0)?null:t.jsxs("section",{className:"relative py-16 px-4 sm:px-6 lg:px-12",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-100 via-blue-50 to-white","aria-hidden":!0}),t.jsxs("div",{className:"relative max-w-6xl mx-auto space-y-10",children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-emerald-500 font-semibold",children:"Immersive Learning"}),t.jsx("h2",{className:"text-3xl md:text-4xl font-black text-slate-900 mt-2",children:s}),a&&t.jsx("p",{className:"text-slate-600 max-w-2xl mt-3 text-base",children:a})]}),t.jsxs("button",{onClick:i,className:"inline-flex items-center gap-2 text-sm font-semibold px-4 py-2 border border-emerald-300 rounded-full text-emerald-700 hover:bg-white",disabled:l,children:[t.jsx(f,{className:`w-4 h-4 ${l?"animate-spin":""}`}),"Refresh"]})]}),l&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((r,c)=>t.jsx("div",{className:"rounded-3xl h-64 bg-gradient-to-br from-emerald-50 to-blue-50 animate-pulse"},c))}),!l&&t.jsx("div",{className:`grid gap-6 ${$[n]}`,children:o.map(r=>E(r,n))})]})]})}export{T as G};
